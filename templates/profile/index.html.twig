{% extends 'base.html.twig' %}

{% block title %}Profil{% endblock %}

{% block body %}
<div class="main-panel">
 <div class="content-wrapper">
  <div class="row justify-content-center mb-4">
   <div class="col-lg-12 p-3" style="background-color: #181b20; border-radius: 5px;">
        <h1 class="text-2xl font-bold mb-4">Profilul meu</h1>

        {% for message in app.flashes('success') %}
            <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
                {{ message }}
            </div>
        {% endfor %}
        {% for message in app.flashes('error') %}
            <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
                {{ message }}
            </div>
        {% endfor %}

        <div class="mb-8">
            <h2 class="text-xl font-semibold mb-2">Informații</h2>
            <p><strong>Nametag:</strong> {{ user.nametag }}</p>
            {% if user.avatar %}
                <img src="{{ asset('uploads/avatars/' ~ user.avatar) }}" alt="Avatar" class="w-32 h-32 rounded-full mt-2">
            {% else %}
                <p>Fără avatar</p>
            {% endif %}
        </div>

        <div class="mb-8">
            <h2 class="text-xl font-semibold mb-2">Schimbă parola</h2>
            <a href="{{ path('app_profile_change_password') }}" class="bg-blue-500 text-white px-4 py-2 rounded">Schimbă parola</a>
        </div>

        <div class="mb-8">
            <h2 class="text-xl font-semibold mb-2">Modifică avatarul</h2>
            <a href="{{ path('app_profile_edit') }}" class="bg-blue-500 text-white px-4 py-2 rounded">Modifică avatarul</a>
        </div>

        <div class="mb-8">
            <h2 class="text-xl font-semibold mb-2">Prieteni</h2>
            {% if user.friends is not empty %}
                <ul class="list-disc pl-5">
                    {% for friend in user.friends %}
                        <li>
                            {{ friend.nametag }}
                            <a href="{{ path('app_profile_remove_friend', {'id': friend.id}) }}" class="text-red-500 ml-2">Elimină</a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>Nu ai prieteni adăugați.</p>
            {% endif %}
        </div>

        <div class="mb-8">
            <h2 class="text-xl font-semibold mb-2">Adaugă un prieten</h2>
            <form action="{{ path('app_profile_add_friend_by_nametag') }}" method="post" class="mt-4">
                <input type="text" name="friend_nametag" placeholder="Introdu nametag-ul prietenului" class="border p-2 rounded">
                <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded">Trimite cerere</button>
            </form>
        </div>

        <div class="mb-8">
            <h2 class="text-xl font-semibold mb-2">Cererile de prietenie primite</h2>
            {% if friendRequests is not empty %}
                <ul class="list-disc pl-5">
                    {% for request in friendRequests %}
                        <li>
                            {{ request.sender.nametag }} -
                            <a href="{{ path('app_profile_accept_friend', {'id': request.id}) }}" class="text-green-500 ml-2">Acceptă</a>
                            <a href="{{ path('app_profile_reject_friend', {'id': request.id}) }}" class="text-red-500 ml-2">Respinge</a>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>Nu ai cereri de prietenie primite.</p>
            {% endif %}
        </div>
    </div>
  </div>
 </div>
</div>
{% endblock %}