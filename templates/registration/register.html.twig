<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Register to Mentionable{% endblock %}</title>

    <link rel="stylesheet" href="{{ asset('assets/css/style.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendors/mdi/css/materialdesignicons.min.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendors/ti-icons/css/themify-icons.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendors/css/vendor.bundle.base.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendors/font-awesome/css/font-awesome.min.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendors/jvectormap/jquery-jvectormap.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendors/flag-icon-css/css/flag-icons.min.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendors/owl-carousel-2/owl.carousel.min.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/vendors/owl-carousel-2/owl.theme.default.min.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/css/style.css') }}">
    <link rel="shortcut icon" href="{{ asset('assets/images/favicon.png') }}" />

    <script src="{{ asset('assets/vendors/js/vendor.bundle.base.js') }}"></script>

    <script src="{{ asset('assets/vendors/chart.js/chart.umd.js') }}"></script>
    <script src="{{ asset('assets/vendors/progressbar.js/progressbar.min.js') }}"></script>
    <script src="{{ asset('assets/vendors/jvectormap/jquery-jvectormap.min.js') }}"></script>
    <script src="{{ asset('assets/vendors/jvectormap/jquery-jvectormap-world-mill-en.js') }}"></script>
    <script src="{{ asset('assets/vendors/owl-carousel-2/owl.carousel.min.js') }}"></script>
    <script src="{{ asset('assets/js/jquery.cookie.js') }}"></script>

    <script src="{{ asset('assets/js/off-canvas.js') }}"></script>
    <script src="{{ asset('assets/js/misc.js') }}"></script>
    <script src="{{ asset('assets/js/settings.js') }}"></script>
    <script src="{{ asset('assets/js/todolist.js') }}"></script>

    <script src="{{ asset('assets/js/proBanner.js') }}"></script>
    <script src="{{ asset('assets/js/dashboard.js') }}"></script>
</head>
<body>
<div class="container-scroller">
            <div class="content-wrapper container-fluid page-body-wrapper full-page-wrapper d-flex align-items-center auth login-bg">
                <div class="card col-lg-4 mx-auto">
                    <div class="card-body px-5 py-5">
                        <div class="d-flex flex-row justify-content-center">
                            <img src="{{ asset('assets/images/logo-mini.png')}}" style="height: 30px; width: 30px" draggable="false" alt="logo" />
                            <h3 class="d-flex justify-content-center card-title text-start mb-3" style="user-select: none">Register</h3>
                        </div>
                        {{ form_start(registrationForm, {'attr': {'class': 'forms-sample'}}) }}
                        {{ form_errors(registrationForm) }}

                        <div class="form-group">
                            {{ form_label(registrationForm.email) }}
                            {{ form_widget(registrationForm.email, {'attr': {'class': 'form-control'}}) }}
                            {{ form_errors(registrationForm.email) }}
                        </div>
                        <div class="form-group">
                            {{ form_label(registrationForm.password) }}
                            {{ form_widget(registrationForm.password, {'attr': {'class': 'form-control'}}) }}
                            {{ form_errors(registrationForm.password) }}
                        </div>
                        <div class="form-group">
                            {{ form_label(registrationForm.nametag) }}
                            {{ form_widget(registrationForm.nametag, {'attr': {'class': 'form-control'}}) }}
                            {{ form_errors(registrationForm.nametag) }}
                        </div>
                        <div class="form-group mb-4 pb-0">
                            {{ form_label(registrationForm.avatar) }}
                            {{ form_widget(registrationForm.avatar, {'attr': {'class': 'form-control'}}) }}
                            {{ form_errors(registrationForm.avatar) }}

                            <p class="mt-2">...or choose from one of our default avatars:</p>
                            <div class="d-flex flex-row">
                                <div class="avatar-card me-2" data-avatar="male-default-character.png">
                                    <img src="{{ asset('assets/images/auth/male-default-character.png') }}" alt="avatar-male" style="width: 70px; height: 70px;" />
                                </div>
                                <div class="avatar-card" data-avatar="female-default-character.png">
                                    <img src="{{ asset('assets/images/auth/female-default-character.png') }}" alt="avatar-female" style="width: 70px; height: 70px;" />
                                </div>
                            </div>

                            {{ form_widget(registrationForm.selectedAvatar, {'attr': {'id': 'selectedAvatarInput'}}) }}
                            {{ form_errors(registrationForm.selectedAvatar) }}
                        </div>
                        <div class="form-check form-group ms-2 mb-1 mt-0 pt-0">
                            {{ form_widget(registrationForm.agreeTerms, {'attr': {'class': 'form-check-input'}}) }}
                            {{ form_label(registrationForm.agreeTerms, 'I agree to the terms', {'label_attr': {'class': 'form-check-label ps-0'}}) }}
                            {{ form_errors(registrationForm.agreeTerms) }}
                        </div>
                        {% for message in app.flashes('error') %}
                            <div class="m-0 p-0 mb-2" id="errorWhileRegistering">
                                <span id="errorMessage" class="badge bg-danger">{{ message }}</span>
                            </div>
                        {% endfor %}
                        <div class="mt-3 p-0 d-flex justify-content-center align-items-center">
                            <button type="submit" class="btn btn-light w-50">Create account</button>
                        </div>
                        {{ form_end(registrationForm) }}
                        <br/>
                        <p class="d-flex justify-content-center mb-0">Already a member?</p>
                        <a href="{{ path('app_login') }}" class="d-flex justify-content-center text-white" style="font-size: 12px">Login here</a>
                    </div>
                </div>
            </div>
        </div>
</body>
</html>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        document.querySelectorAll('.avatar-card').forEach(card => {
            card.addEventListener('click', function () {
                document.querySelectorAll('.avatar-card').forEach(c => c.classList.remove('selected'));
                this.classList.add('selected');

                const selectedAvatar = this.getAttribute('data-avatar');
                const input = document.getElementById('registration_form_selectedAvatar');

                if (!input) {
                    console.error('selectedAvatarInput is still null!');
                    return;
                }

                input.value = selectedAvatar;

                console.log('Selected avatar:', selectedAvatar);
                console.log('Hidden input value:', input.value);
            });
        });
    });


</script>
